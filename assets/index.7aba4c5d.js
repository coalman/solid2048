var B=Object.defineProperty,K=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var A=(t,e,s)=>e in t?B(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,v=(t,e)=>{for(var s in e||(e={}))O.call(e,s)&&A(t,s,e[s]);if(I)for(var s of I(e))D.call(e,s)&&A(t,s,e[s]);return t},$=(t,e)=>K(t,M(e));import{t as m,i as p,d as Y,o as T,c as y,a as q,b as S,e as F,f as g,m as C,S as N,g as G,s as J,r as U}from"./vendor.5334bcb8.js";const X=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}};X();const H=m('<div class="score-board"><div class="score"><span class="score-title">score</span><span></span></div><div class="score"><span class="score-title">best</span><span></span></div></div>');function V(t){return(()=>{const e=H.cloneNode(!0),s=e.firstChild,o=s.firstChild,n=o.nextSibling,l=s.nextSibling,r=l.firstChild,c=r.nextSibling;return p(n,()=>t.score),p(c,()=>t.bestScore),e})()}const d=4;function z(t,e){const s=[];let o,n;for(let l of t){const r=e[l];r===null?o===void 0&&(o=l):n&&n[1]===r?(e[l]=null,o===void 0&&(o=l),e[n[0]]=r+1,s.push({change:"move",rank:r,startIndex:l,destIndex:n[0]}),s.push({change:"merge",rank:r+1,index:n[0]}),n=void 0):o!==void 0?(e[l]=null,e[o]=r,n=[o,r],s.push({change:"move",rank:r,startIndex:l,destIndex:o}),o=t[t.indexOf(o)+1]):(s.push({change:"none",rank:r,index:l}),n=[l,r])}return s}function*L(t,e,s){let o=e;for(let n=0;n<t;n++)yield o,o+=s}const Q=t=>e=>{const s=[],o=[...e];let n=0,l,r;["left","right"].includes(t)?(l=d,r=1):(l=1,r=d),["right","down"].includes(t)&&(l*=-1,r*=-1,n=d*d-1);for(let c of L(d,n,l)){const f=Array.from(L(d,c,r)),i=z(f,o);s.push(...i)}return{grid:o,states:s}};function W(t,e){return t.length===e.length&&t.every((s,o)=>s===e[o])}function Z(t){const e=[];for(let[s,o]of t.entries())o||e.push(s);return e}function _(t){const e=Z(t),s=e[0|Math.random()*e.length],o=Math.random()<.9?1:2;return t[s]=o,{change:"new",rank:o,index:s}}function ee(t){const e=t%d,s=Math.floor(t/d),o=[];for(let[n,l]of[[-1,0],[1,0],[0,-1],[0,1]]){const r=e+n,c=s+l;r>=0&&r<d&&c>=0&&c<d&&o.push(r+d*c)}return o}function te(t){if(t.some(e=>e===11))return"win";for(let e=0;e<d;e++)for(let s=0;s<d;s++){const o=s+e*d,n=t[o];if(n===null||ee(o).map(r=>t[r]).some(r=>r===n))return!1}return"lose"}const ne=m('<div class="board"></div>'),re=m('<div class="cell"></div>'),se=m('<div class="reset-btn-container"><button type="button" class="reset-btn">New Game</button></div>'),oe=m("<p>You win!</p>"),le=m('<div><button type="button" class="reset-btn">Keep going</button><button type="button" class="reset-btn">Try again</button></div>'),ie=m("<p>Game over!</p>"),ce=m('<button type="button" class="reset-btn">Try again</button>'),ae=m('<div class="pause-screen"></div>'),de=m('<div class="tile-pos"><div></div></div>');function ue(t){const e=[0,1,2,3],s=e.flatMap(o=>e.map(n=>[n,o]));return(()=>{const o=ne.cloneNode(!0);return p(o,()=>s.map((n,l)=>(()=>{const r=re.cloneNode(!0);return(c=>{t.cellRefs[l]=c})(r),G(c=>{const f=`${n[0]+1} / span 1`,i=`${n[1]+1} / span 1`;return f!==c._v$&&r.style.setProperty("grid-column",c._v$=f),i!==c._v$2&&r.style.setProperty("grid-row",c._v$2=i),c},{_v$:void 0,_v$2:void 0}),r})()),null),p(o,()=>t.children,null),o})()}function fe(){return{grid:Array(16).fill(null),states:[]}}function me(t){let e=fe();{const i=localStorage.getItem("gameState");i!==null?e=JSON.parse(i):T(()=>{n(a=>{const u=[...a.grid];return $(v({},a),{grid:u,states:[_(u),_(u)]})})})}function s(){n(i=>{const a=Array(16).fill(null);return $(v({},i),{grid:a,states:[_(a),_(a)]})}),t.onReset(),c(!1)}const[o,n]=y(e),l=q(()=>te(o().grid)),[r,c]=y(!1),f=[];S(()=>{const i=o(),a=$(v({},i),{states:i.states.map(u=>({change:"none",rank:u.rank,index:u.change==="move"?u.destIndex:u.index}))});localStorage.setItem("gameState",JSON.stringify(a))});{let i=function(a){if(!(a.altKey||a.ctrlKey||a.metaKey||a.shiftKey)){if(l()===!1||l()==="win"&&r()){const u=pe(a.key);if(u){a.preventDefault(),n(w=>{let{grid:x,states:k}=Q(u)(w.grid);W(x,w.grid)||k.push(_(x));const E=k.filter(h=>h.change==="merge").map(h=>j(h.rank)).reduce((h,P)=>P+h,0);return t.onScore(E),$(v({},w),{grid:x,states:k})});return}}a.key==="r"&&s()}};T(()=>{document.addEventListener("keydown",i)}),F(()=>{document.removeEventListener("keydown",i)})}return[(()=>{const i=se.cloneNode(!0),a=i.firstChild;return a.$$click=s,i})(),g(ue,{cellRefs:f,get children(){return[C(()=>o().states.map(i=>g(ge,{cellRefs:f,state:i}))),g(N,{get when(){return C(()=>!r(),!0)()&&l()==="win"},get children(){return g(R,{get children(){return[oe.cloneNode(!0),(()=>{const i=le.cloneNode(!0),a=i.firstChild,u=a.nextSibling;return i.style.setProperty("display","flex"),i.style.setProperty("gap","40px"),a.$$click=()=>c(()=>!0),u.$$click=s,i})()]}})}}),g(N,{get when(){return l()==="lose"},get children(){return g(R,{get children(){return[ie.cloneNode(!0),(()=>{const i=ce.cloneNode(!0);return i.$$click=s,i})()]}})}})]}})]}function R(t){return(()=>{const e=ae.cloneNode(!0);return p(e,()=>t.children),e})()}function ge(t){const[e,s]=y(null);S(()=>{let n;if(t.state.change==="move"){n=t.state.startIndex;const r=t.state.destIndex;requestAnimationFrame(()=>{const c=t.cellRefs[r];s([c.offsetLeft,c.offsetTop])})}else n=t.state.index;const l=t.cellRefs[n];s([l.offsetLeft,l.offsetTop])});function o(){const n=e();return n===null?void 0:`translate(${n[0]}px, ${n[1]}px)`}return g(N,{get when(){return e()!==null},get children(){const n=de.cloneNode(!0),l=n.firstChild;return p(l,()=>j(t.state.rank)),G(r=>{const c=o(),f=["tile",`tile-${t.state.change}`].join(" "),i=Math.min(t.state.rank,12);return c!==r._v$3&&n.style.setProperty("transform",r._v$3=c),f!==r._v$4&&(l.className=r._v$4=f),i!==r._v$5&&J(l,"data-rank",r._v$5=i),r},{_v$3:void 0,_v$4:void 0,_v$5:void 0}),n}})}function pe(t){switch(t){case"ArrowLeft":case"a":case"h":return"left";case"ArrowRight":case"d":case"l":return"right";case"ArrowDown":case"s":case"j":return"down";case"ArrowUp":case"w":case"k":return"up"}}const b=[1];function j(t){for(let e=b.length;e<=t;e++)b[e]=b[e-1]*2;return b[t]}Y(["click"]);const he=m('<div id="app"><header><h1>2048</h1></header><main></main><p class="game-explanation"><strong class="important">How to play: </strong>Use your <strong>arrow keys </strong>to move the tiles. Tiles with the same number<strong> merge into one</strong> when they touch. Add them up to reach<strong> 2048!</strong></p></div>');function ve(){let t=0;{const r=localStorage.getItem("gameScore");r!==null&&(t=parseInt(r,10)),isNaN(t)&&(t=0)}let e=0;{const r=localStorage.getItem("bestGameScore");r!==null&&(e=parseInt(r,10)),isNaN(e)&&(e=t)}const[s,o]=y(t),[n,l]=y(e);return S(()=>{const r=String(s());localStorage.setItem("gameScore",r)}),S(()=>{s()>n()&&l(s())}),S(()=>{const r=String(n());localStorage.setItem("bestGameScore",r)}),(()=>{const r=he.cloneNode(!0),c=r.firstChild;c.firstChild;const f=c.nextSibling;return p(c,g(V,{get score(){return s()},get bestScore(){return n()}}),null),p(f,g(me,{onScore:i=>o(a=>a+i),onReset:()=>o(0)})),r})()}U(ve,document.body);
